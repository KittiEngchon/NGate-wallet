<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÅ‡∏≠‡∏õ | Mobibox</title>
  <link rel="stylesheet" href="assets/style.css" />
  <script src="libs/ui.js"></script>
  <script src="libs/ai.js" defer></script>
  <script src="libs/wallet.js" defer></script>
</head>
<body>
  <a href="index.html">‚Üê ‡∏Å‡∏•‡∏±‡∏ö</a>
  <h1 id="app-name">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</h1>
  <button onclick="connectWallet()">üîó Connect Wallet</button>

  <div id="app-detail">
    <p id="description"></p>
    <p>Chain: <span id="chain"></span></p>
    <p>Category: <span id="category"></span></p>
    <p>‡∏ú‡∏π‡πâ‡∏û‡∏±‡∏í‡∏ô‡∏≤: <span id="developer"></span> <button onclick="copyDev()">üìã ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å</button></p>
    <a id="visit-btn" href="#" target="_blank" class="btn">üîó ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå</a>
  </div>

  <hr />

  <h3>üß† Trust Score (AI)</h3>
  <div id="trust-score">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>

  <h3>üîó ‡πÅ‡∏ä‡∏£‡πå‡πÅ‡∏≠‡∏õ</h3>
  <button onclick="copyLink()">üîó ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå</button>
  <button onclick="generateQR()">üì± QR Code</button>

  <h3>‚≠ê ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</h3>
  <div id="reviews">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß</div>

  <script>
    async function loadAppDetail() {
      const params = new URLSearchParams(window.location.search);
      const appId = params.get("id");

      const res = await fetch("data/apps.json");
      const apps = await res.json();
      const app = apps.find(a => a.id === appId);

      if (!app) {
        document.getElementById("app-name").innerText = "‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÅ‡∏≠‡∏õ";
        return;
      }

      document.getElementById("app-name").innerText = app.name;
      document.getElementById("description").innerText = app.description || "-";
      document.getElementById("chain").innerText = app.chain || "-";
      document.getElementById("category").innerText = app.category || "-";
      document.getElementById("developer").innerText = app.developer || "-";
      document.getElementById("visit-btn").href = app.url || "#";
    }

    function copyDev() {
      const dev = document.getElementById("developer").innerText;
      navigator.clipboard.writeText(dev);
      showToast("‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å address ‡πÅ‡∏•‡πâ‡∏ß");
    }

    function copyLink() {
      navigator.clipboard.writeText(window.location.href);
      showToast("‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢");
    }

    function generateQR() {
      const url = window.location.href;
      window.open(`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(url)}`, "_blank");
    }

    document.addEventListener("DOMContentLoaded", loadAppDetail);
  </script>
</body>
</html>
